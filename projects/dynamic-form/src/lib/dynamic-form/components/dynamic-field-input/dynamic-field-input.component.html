<div [formGroup]="group">

    <ng-container *ngIf="detailConfig.list; else nonListInput">
        <label [ngClass]="detailConfig.css_class.group_label ?? ''">{{ config.display_text }}</label>

        <div *ngFor="let choice of detailConfig.dataset; index as i;" [ngClass]="detailConfig.css_class.group ?? ''">
            <input [ngClass]="detailConfig.css_class.input ?? ''"
                [attr.id]="detailConfig.type + '_' + config.name + '_' + index + '_' + i"
                (change)="onCheckChange($event)" [value]="choice.value" [attr.type]="detailConfig.type"
                [attr.name]="config.name" [checked]="shouldChecked(choice.value)">

            <label [ngClass]="detailConfig.css_class.input_label ?? ''"
                [attr.for]="detailConfig.type + '_' + config.name + '_' + index + '_' + i">{{ choice.key }}</label>
        </div>
    </ng-container>

    <ng-template #nonListInput>
        <ng-container *ngIf="detailConfig.type !== 'checkbox'; else nonListInputForCheckbox">
            <div [ngClass]="detailConfig.css_class.group ?? ''">

                <label [ngClass]="detailConfig.css_class.input_label ?? ''"
                    [attr.for]="detailConfig.type + '_' + config.name + '_' + index">{{
                    config.display_text }}</label>

                <span *ngIf="detailConfig.type==='range' || detailConfig.type==='color'">{{ group.value[config.name]
                    }}</span>

                <input [ngClass]="detailConfig.css_class.input ?? ''"
                    [attr.id]="detailConfig.type + '_' + config.name + '_' + index" [formControlName]="config.name"
                    [attr.type]="detailConfig.type" [attr.min]="detailConfig.type==='range' ? 0 : null"
                    [attr.max]="detailConfig.type==='range' ? 100: null"
                    [attr.step]="detailConfig.type==='range' ? 5: null">

            </div>

        </ng-container>
        <ng-template #nonListInputForCheckbox>

            <label [ngClass]="detailConfig.css_class.group_label ?? ''">{{ config.display_text }}</label>

            <div [ngClass]="detailConfig.css_class.group ?? ''">

                <input [ngClass]="detailConfig.css_class.input ?? ''"
                    [attr.id]="detailConfig.type + '_' + config.name + '_' + index" (change)="onCheckChange($event)"
                    [attr.type]="detailConfig.type" [attr.name]="config.name"
                    [checked]="shouldChecked(group.controls[config.name].value)">
                <label [ngClass]="detailConfig.css_class.input_label ?? ''"
                    [attr.for]="detailConfig.type + '_' + config.name + '_' + index">{{
                    detailConfig.single_checkbox_display_text }}</label>

            </div>

        </ng-template>

    </ng-template>

</div>